{% extends "base.html" %}

{% block title %}Configurações da Loja - Admin - {{ store_settings.store_name }}{% endblock %}

{% block content %}
<div class="admin_container">
    <div class="admin_header">
        <h1><i class="fa fa-cog"></i> Configurações da Loja</h1>
        <a href="{{ url_for('admin.dashboard') }}" class="btn_secondary">
            <i class="fa fa-arrow-left"></i> Voltar ao Dashboard
        </a>
    </div>

    <div class="admin_content">
        <form method="POST" class="admin_form">
            <div class="form_section">
                <h2><i class="fa fa-building"></i> Informações da Loja</h2>
                
                <div class="form_group">
                    <label for="store_name">
                        <i class="fa fa-store"></i> Nome da Loja
                    </label>
                    <input 
                        type="text" 
                        id="store_name" 
                        name="store_name" 
                        class="form_control" 
                        value="{{ settings.store_name }}"
                        required
                    >
                    <small class="form_text">Nome que aparecerá no topo do site</small>
                </div>

                <div class="form_group">
                    <label for="store_logo">
                        <i class="fa fa-image"></i> URL do Logo
                    </label>
                    <input 
                        type="url" 
                        id="store_logo" 
                        name="store_logo" 
                        class="form_control" 
                        value="{{ settings.store_logo }}"
                        placeholder="https://exemplo.com/logo.png"
                    >
                    <small class="form_text">URL do logotipo da sua loja (deixe em branco para usar apenas texto)</small>
                </div>

                <div class="form_group">
                    <label for="store_description">
                        <i class="fa fa-info-circle"></i> Descrição da Loja
                    </label>
                    <textarea 
                        id="store_description" 
                        name="store_description" 
                        rows="2" 
                        class="form_control"
                        placeholder="Slogan ou descrição curta da sua loja"
                    >{{ settings.store_description }}</textarea>
                    <small class="form_text">Descrição que aparece no site</small>
                </div>
            </div>

            <div class="form_section">
                <h2><i class="fa fa-phone"></i> Informações de Contato</h2>
                
                <div class="form_group">
                    <label for="store_phone">
                        <i class="fa fa-phone"></i> Telefone
                    </label>
                    <input 
                        type="text" 
                        id="store_phone" 
                        name="store_phone" 
                        class="form_control" 
                        value="{{ settings.store_phone }}"
                        placeholder="(31) 98765-4321"
                    >
                    <small class="form_text">Telefone de contato com DDD</small>
                </div>

                <div class="form_group">
                    <label for="store_whatsapp">
                        <i class="fa fa-whatsapp"></i> WhatsApp (Número completo)
                    </label>
                    <input 
                        type="text" 
                        id="store_whatsapp" 
                        name="store_whatsapp" 
                        class="form_control" 
                        value="{{ settings.store_whatsapp }}"
                        placeholder="5531987654321"
                    >
                    <small class="form_text">Número do WhatsApp com código do país (Ex: 5531987654321)</small>
                </div>

                <div class="form_group">
                    <label for="store_email">
                        <i class="fa fa-envelope"></i> E-mail
                    </label>
                    <input 
                        type="email" 
                        id="store_email" 
                        name="store_email" 
                        class="form_control" 
                        value="{{ settings.store_email }}"
                        placeholder="contato@tcb.com.br"
                    >
                    <small class="form_text">E-mail de contato</small>
                </div>
            </div>

            <div class="form_section">
                <h2><i class="fa fa-store"></i> Retirada no Local</h2>
                
                <div class="form_group checkbox_group">
                    <label class="checkbox_label">
                        <input type="checkbox" name="pickup_enabled" {% if settings.pickup_enabled %}checked{% endif %}>
                        <span>Habilitar retirada no local</span>
                    </label>
                </div>

                <div class="form_group">
                    <label for="pickup_address">
                        <i class="fa fa-map-marker"></i> Endereço para Retirada
                    </label>
                    <textarea 
                        id="pickup_address" 
                        name="pickup_address" 
                        rows="3" 
                        class="form_control"
                        placeholder="Av. Exemplo, 123 - Centro - São Paulo, SP - CEP 01000-000"
                    >{{ settings.pickup_address }}</textarea>
                    <small class="form_text">Este endereço será exibido para os clientes que escolherem retirada no local</small>
                </div>
            </div>

            <div class="form_section">
                <h2><i class="fa fa-truck"></i> Entrega</h2>
                
                <div class="form_group checkbox_group">
                    <label class="checkbox_label">
                        <input type="checkbox" name="delivery_enabled" {% if settings.delivery_enabled %}checked{% endif %}>
                        <span>Habilitar entrega</span>
                    </label>
                </div>

                <div class="form_group">
                    <label for="shipping_cost">
                        <i class="fa fa-dollar"></i> Custo de Entrega (R$)
                    </label>
                    <input 
                        type="number" 
                        id="shipping_cost" 
                        name="shipping_cost" 
                        class="form_control" 
                        step="0.01" 
                        min="0"
                        value="{{ settings.shipping_cost }}"
                        required
                    >
                    <small class="form_text">Valor fixo de entrega</small>
                </div>

                <div class="form_group">
                    <label for="free_shipping_min">
                        <i class="fa fa-gift"></i> Compra Mínima para Frete Grátis (R$)
                    </label>
                    <input 
                        type="number" 
                        id="free_shipping_min" 
                        name="free_shipping_min" 
                        class="form_control" 
                        step="0.01" 
                        min="0"
                        value="{{ settings.free_shipping_min }}"
                        required
                    >
                    <small class="form_text">Valor mínimo de compra para frete grátis</small>
                </div>
            </div>

            <div class="form_section">
                <h2><i class="fa fa-map-marker"></i> Área de Cobertura de Entrega</h2>
                
                <div class="form_group checkbox_group">
                    <label class="checkbox_label">
                        <input type="checkbox" name="delivery_radius_enabled" {% if settings.delivery_radius_enabled %}checked{% endif %}>
                        <span>Habilitar validação por raio de entrega</span>
                    </label>
                    <small class="form_text">Quando habilitado, o sistema validará se o endereço do cliente está dentro do raio de entrega</small>
                </div>

                <div class="form_group">
                    <label for="store_latitude">
                        <i class="fa fa-globe"></i> Latitude da Loja
                    </label>
                    <input 
                        type="text" 
                        id="store_latitude" 
                        name="store_latitude" 
                        class="form_control" 
                        value="{{ settings.store_latitude }}"
                        placeholder="-23.550520"
                    >
                    <small class="form_text">Coordenada de latitude (Ex: -23.550520)</small>
                </div>

                <div class="form_group">
                    <label for="store_longitude">
                        <i class="fa fa-globe"></i> Longitude da Loja
                    </label>
                    <input 
                        type="text" 
                        id="store_longitude" 
                        name="store_longitude" 
                        class="form_control" 
                        value="{{ settings.store_longitude }}"
                        placeholder="-46.633308"
                    >
                    <small class="form_text">Coordenada de longitude (Ex: -46.633308)</small>
                </div>

                <div class="form_group">
                    <label for="delivery_radius_km">
                        <i class="fa fa-circle-o"></i> Raio de Entrega (km)
                    </label>
                    <input 
                        type="number" 
                        id="delivery_radius_km" 
                        name="delivery_radius_km" 
                        class="form_control" 
                        step="0.1" 
                        min="0"
                        value="{{ settings.delivery_radius_km }}"
                        placeholder="10"
                    >
                    <small class="form_text">Raio máximo de entrega em quilômetros a partir da localização da loja</small>
                </div>

                <div class="form_group">
                    <div style="padding: 15px; background: #f0f8ff; border-left: 4px solid #2196F3; border-radius: 4px;">
                        <strong><i class="fa fa-info-circle"></i> Como obter as coordenadas?</strong>
                        <p style="margin: 10px 0 0 0; font-size: 13px; line-height: 1.6;">
                            1. Acesse <a href="https://www.google.com/maps" target="_blank" style="color: #2196F3;">Google Maps</a><br>
                            2. Clique com o botão direito no local da sua loja<br>
                            3. Clique no primeiro item (coordenadas)<br>
                            4. As coordenadas serão copiadas automaticamente
                        </p>
                    </div>
                </div>
            </div>

            <div class="form_section">
                <h2><i class="fa fa-clock"></i> Horários de Funcionamento</h2>
                
                <div class="form_group">
                    <label for="opening_hours_monday">
                        <i class="fa fa-calendar"></i> Segunda-feira
                    </label>
                    <input 
                        type="text" 
                        id="opening_hours_monday" 
                        name="opening_hours_monday" 
                        class="form_control" 
                        value="{{ settings.opening_hours_monday }}"
                        placeholder="18:00 - 23:59 ou Fechado"
                    >
                </div>

                <div class="form_group">
                    <label for="opening_hours_tuesday">
                        <i class="fa fa-calendar"></i> Terça-feira
                    </label>
                    <input 
                        type="text" 
                        id="opening_hours_tuesday" 
                        name="opening_hours_tuesday" 
                        class="form_control" 
                        value="{{ settings.opening_hours_tuesday }}"
                        placeholder="18:00 - 23:59 ou Fechado"
                    >
                </div>

                <div class="form_group">
                    <label for="opening_hours_wednesday">
                        <i class="fa fa-calendar"></i> Quarta-feira
                    </label>
                    <input 
                        type="text" 
                        id="opening_hours_wednesday" 
                        name="opening_hours_wednesday" 
                        class="form_control" 
                        value="{{ settings.opening_hours_wednesday }}"
                        placeholder="18:00 - 23:59 ou Fechado"
                    >
                </div>

                <div class="form_group">
                    <label for="opening_hours_thursday">
                        <i class="fa fa-calendar"></i> Quinta-feira
                    </label>
                    <input 
                        type="text" 
                        id="opening_hours_thursday" 
                        name="opening_hours_thursday" 
                        class="form_control" 
                        value="{{ settings.opening_hours_thursday }}"
                        placeholder="18:00 - 23:59 ou Fechado"
                    >
                </div>

                <div class="form_group">
                    <label for="opening_hours_friday">
                        <i class="fa fa-calendar"></i> Sexta-feira
                    </label>
                    <input 
                        type="text" 
                        id="opening_hours_friday" 
                        name="opening_hours_friday" 
                        class="form_control" 
                        value="{{ settings.opening_hours_friday }}"
                        placeholder="18:00 - 23:59 ou Fechado"
                    >
                </div>

                <div class="form_group">
                    <label for="opening_hours_saturday">
                        <i class="fa fa-calendar"></i> Sábado
                    </label>
                    <input 
                        type="text" 
                        id="opening_hours_saturday" 
                        name="opening_hours_saturday" 
                        class="form_control" 
                        value="{{ settings.opening_hours_saturday }}"
                        placeholder="18:00 - 23:59 ou Fechado"
                    >
                </div>

                <div class="form_group">
                    <label for="opening_hours_sunday">
                        <i class="fa fa-calendar"></i> Domingo
                    </label>
                    <input 
                        type="text" 
                        id="opening_hours_sunday" 
                        name="opening_hours_sunday" 
                        class="form_control" 
                        value="{{ settings.opening_hours_sunday }}"
                        placeholder="18:00 - 23:59 ou Fechado"
                    >
                </div>
            </div>

            <div class="form_actions">
                <button type="submit" class="btn_primary">
                    <i class="fa fa-save"></i> Salvar Configurações
                </button>
            </div>
        </form>
    </div>
</div>

<style>
.admin_container {
    max-width: 900px;
    margin: 30px auto;
    padding: 0 20px;
}

.admin_header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
    padding-bottom: 15px;
    border-bottom: 2px solid #e0e0e0;
}

.admin_header h1 {
    font-size: 28px;
    color: #333;
}

.admin_content {
    background: #fff;
    border-radius: 8px;
    padding: 30px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.form_section {
    margin-bottom: 35px;
    padding-bottom: 25px;
    border-bottom: 1px solid #e0e0e0;
}

.form_section:last-of-type {
    border-bottom: none;
    margin-bottom: 0;
}

.form_section h2 {
    font-size: 20px;
    color: #333;
    margin-bottom: 20px;
}

.form_group {
    margin-bottom: 20px;
}

.form_group label {
    display: block;
    font-weight: 600;
    margin-bottom: 8px;
    color: #555;
}

.form_control {
    width: 100%;
    padding: 10px 15px;
    border: 1px solid #ddd;
    border-radius: 5px;
    font-size: 14px;
    transition: border-color 0.3s;
}

.form_control:focus {
    outline: none;
    border-color: var(--color-red);
}

.form_text {
    display: block;
    margin-top: 5px;
    font-size: 12px;
    color: #999;
}

.checkbox_group {
    margin-bottom: 15px;
}

.checkbox_label {
    display: flex;
    align-items: center;
    cursor: pointer;
    font-weight: normal;
}

.checkbox_label input[type="checkbox"] {
    width: 20px;
    height: 20px;
    margin-right: 10px;
    cursor: pointer;
}

.checkbox_label span {
    font-size: 15px;
    color: #333;
}

.form_actions {
    margin-top: 30px;
    text-align: right;
}

.btn_primary {
    background: var(--color-red);
    color: #fff;
    border: none;
    padding: 12px 30px;
    border-radius: 5px;
    font-size: 15px;
    font-weight: 700;
    cursor: pointer;
    transition: background 0.3s;
}

.btn_primary:hover {
    background: var(--color-red-dark);
}

.btn_secondary {
    background: #6c757d;
    color: #fff;
    padding: 10px 20px;
    border-radius: 5px;
    text-decoration: none;
    font-weight: 600;
    font-size: 14px;
    transition: background 0.3s;
}

.btn_secondary:hover {
    background: #5a6268;
}
</style>
{% endblock %}
