{% extends "base.html" %}

{% block title %}Alterar Senha - {{ store_settings.store_name }}{% endblock %}

{% block content %}
<div class="content_section" style="margin: 40px auto; max-width: 500px;">
    <div style="background: #fff; padding: 40px; border-radius: 10px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
        <h2 style="font-size: 28px; margin-bottom: 10px; color: #222; text-align: center;">
            <i class="fa fa-lock"></i> Alterar Senha
        </h2>
        <p style="text-align: center; color: #777; margin-bottom: 30px;">
            Digite sua senha atual e escolha uma nova senha segura
        </p>
        
        <form method="POST" action="{{ url_for('auth.change_password') }}">
            <div style="margin-bottom: 20px;">
                <label for="current_password" style="display: block; margin-bottom: 8px; font-weight: 600; color: #222;">
                    <i class="fa fa-key"></i> Senha Atual:
                </label>
                <input 
                    type="password" 
                    id="current_password" 
                    name="current_password" 
                    required 
                    placeholder="Digite sua senha atual"
                    style="width: 100%; padding: 14px; border: 2px solid #ddd; border-radius: 8px; font-size: 15px; transition: border-color 0.3s;"
                    onfocus="this.style.borderColor='#DC143C'"
                    onblur="this.style.borderColor='#ddd'"
                >
            </div>
            
            <div style="margin-bottom: 20px;">
                <label for="new_password" style="display: block; margin-bottom: 8px; font-weight: 600; color: #222;">
                    <i class="fa fa-lock"></i> Nova Senha:
                </label>
                <input 
                    type="password" 
                    id="new_password" 
                    name="new_password" 
                    required 
                    placeholder="Digite a nova senha (mínimo 6 caracteres)"
                    style="width: 100%; padding: 14px; border: 2px solid #ddd; border-radius: 8px; font-size: 15px; transition: border-color 0.3s;"
                    onfocus="this.style.borderColor='#DC143C'"
                    onblur="this.style.borderColor='#ddd'"
                >
                <small style="color: #888; display: block; margin-top: 5px;">
                    <i class="fa fa-info-circle"></i> Use no mínimo 6 caracteres
                </small>
            </div>
            
            <div style="margin-bottom: 30px;">
                <label for="confirm_password" style="display: block; margin-bottom: 8px; font-weight: 600; color: #222;">
                    <i class="fa fa-check-circle"></i> Confirmar Nova Senha:
                </label>
                <input 
                    type="password" 
                    id="confirm_password" 
                    name="confirm_password" 
                    required 
                    placeholder="Digite a nova senha novamente"
                    style="width: 100%; padding: 14px; border: 2px solid #ddd; border-radius: 8px; font-size: 15px; transition: border-color 0.3s;"
                    onfocus="this.style.borderColor='#DC143C'"
                    onblur="this.style.borderColor='#ddd'"
                >
            </div>
            
            <div style="display: flex; gap: 10px;">
                <button type="submit" class="btn_buy" style="flex: 1; padding: 16px; font-size: 16px; border-radius: 8px;">
                    <i class="fa fa-check"></i> ALTERAR SENHA
                </button>
                <a href="{{ url_for('main.index') }}" style="flex: 1; padding: 16px; text-align: center; background: #ccc; color: #222; border-radius: 8px; font-weight: 700; text-decoration: none; display: flex; align-items: center; justify-content: center;">
                    <i class="fa fa-times"></i> &nbsp;CANCELAR
                </a>
            </div>
        </form>
        
        <div style="margin-top: 25px; padding: 15px; background: #f5f5f5; border-radius: 8px; border-left: 4px solid #DC143C;">
            <p style="margin: 0; font-size: 13px; color: #777;">
                <i class="fa fa-shield" style="color: #DC143C;"></i> 
                <strong>Dicas de segurança:</strong><br>
                • Use letras maiúsculas e minúsculas<br>
                • Inclua números e caracteres especiais<br>
                • Não compartilhe sua senha com ninguém
            </p>
        </div>
    </div>
</div>

<script>
// Validação em tempo real
const newPassword = document.getElementById('new_password');
const confirmPassword = document.getElementById('confirm_password');

confirmPassword.addEventListener('input', function() {
    if (newPassword.value !== confirmPassword.value) {
        confirmPassword.style.borderColor = '#ff4444';
    } else {
        confirmPassword.style.borderColor = '#00C851';
    }
});
</script>
{% endblock %}
